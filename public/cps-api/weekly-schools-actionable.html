<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Weekly Schools Actionable</title>
  <meta name="author" content="Nathan Goldbaum">
  <meta name="description" content="Get weekly data on COVID actionable cases in CPS.">
  <link rel="stylesheet" type="text/css" href="/assets/css/shell.css">
  <link rel="stylesheet" type="text/css" href="/assets/css/api.css">

</head>
<body>
  <header>
    <nav>
      <ul>
        <li><a href="/">Home</a></li>
      </ul>
    </nav>
  </header>
  <main>
    <h1>Weekly Schools Actionable</h1>
    <p>
    This page queries the CPS API for all the weeks in which each school has reported “actionable cases” of COVID. You can query for any week in which a school has recorded cases this school year, according to CPS data. The default value is the most recent week (and could include the current week, which has not yet come to an end). Use the dropdown to change the week selected. Results are ordered by most cases in the week selected. Cumulative YTD data is based on cases up to and including the selected week. To copy this data into another spreadsheet for analysis, click the button that says “copy to clipboard.”
    </p>
    <h2>Query activity log</h2>
    <div style="background: #ddd; padding: 10px;">
    <output id="queryOutput"></output>
    </div>
    <p id="buttons">
      <button id="lookup" type="submit">Resend Query</button>
      <label for="weeks">Show data for week ending: </label>
      <select name="weeks-select" id="weeks">
      </select>
      <button class="btn" data-clipboard-target="#dataOutput">
        <img src="/assets/img/copied.svg" alt="" style="height: 1.6em; margin: 8px;"/>
        <span>Copy table to clipboard</span>
      </button>
      <span id="copiedMsg"></span>
    </p>
    <output id="dataOutput"></output>
  </main>

  <footer>
    <p>If you have any issues, <a href="mailto:NathanGoldbaum@ctulocal1.org?subject=Tools website">email Nate Goldbaum</a> or call his cell phone at 773-490-5996.
    </p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js"></script>
  <script type="text/javascript" src="/assets/js/cps-api-weekly-schools-actionable.js"></script>
  <script type="text/javascript">
   if (document.addEventListener) document.addEventListener("DOMContentLoaded", autorun, false);
   else if (document.attachEvent) document.attachEvent("onreadystatechange", autorun);
   else window.onload = autorun;
  </script>
</body>
</html>
